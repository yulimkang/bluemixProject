<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.ibmMeeting.Dao.SearchDao">


	<!-- 작성자 : 최문정 -->
	<!-- 일반 검색, 반복예약기간 (rsv_confirm_state(승인상태) == Y, rsv_repeat_period(반복예약기간) = N) -->
	<!-- '전체' 옵션, 최신순으로 검색 -->
	<select id="generalSelectByAllOrderByNewList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no, 
			   r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			   r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null" >
			where r.rsv_conf_no = c.conf_no
			and (UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			or r.rsv_mem_nm = #{value}
			or REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date DESC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '전체' 옵션, 오래된 순으로 검색 -->
	<select id="generalSelectByAllOrderByOldList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no,  
			   r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			    r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and (UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			or r.rsv_mem_nm = #{value}
			or REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date ASC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 페이징을 위한 '전체' 옵션 검색 결과 개수 -->
	<select id="rownumSelectByAll" resultType="Integer" parameterType="HashMap">
		select count(*)
		from RESERVATION r
	
		<if test="value !=null">
			where (UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			or r.rsv_mem_nm = #{value}
			or REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!--  '회의제목' 옵션, 최신순으로 검색 -->
	<select id="generalSelectByTitleOrderByNewList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no,  
		       r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			    r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			  
		from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date DESC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '회의제목' 옵션, 오래된 순으로 검색 -->
	<select id="generalSelectByTitleOrderByOldList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no,  
		       r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			    r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			  
		from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date ASC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 페이징을 위한 '회의제목' 옵션 검색 결과 개수 -->
	<select id="rownumSelectByTitle" resultType="Integer" parameterType="HashMap">
		select count(*)
		from RESERVATION r
	
		<if test="value !=null">
			where UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자이름' 옵션, 최신순으로 검색 -->
	<select id="generalSelectByMemNMOrderByNewList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no,  
		       r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			    r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			   
			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and r.rsv_mem_nm = #{value}
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date DESC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자이름' 옵션, 오래된 순으로 검색 -->
	<select id="generalSelectByMemNMOrderByOldList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
		select r.rsv_no,  
		       r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			    r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek
			   
			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and r.rsv_mem_nm = #{value}
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date ASC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!--페이징을 위한 '예약자 이름' 옵션 검색 결과 개수 -->
	<select id="rownumSelectByMemNM" resultType="Integer" parameterType="HashMap">
		select count(*)
		from RESERVATION r
	
		<if test="value !=null">
			where r.rsv_mem_nm = #{value}
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 핸드폰 번호' 옵션, 최신순으로 검색 -->
	<select id="genelralSelectByMemPNOrderByNewList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
			select r.rsv_no, 
			   r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_mem_pn,
			   r.rsv_confirm_state,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek

			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date DESC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}

	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 핸드폰 번호' 옵션, 오래된 순으로 검색 -->
	<select id="genelralSelectByMemPNOrderByOldList" resultType="HashMap" parameterType="HashMap">
		select * from (
		select @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		from (
			select r.rsv_no, 
			   r.rsv_date,  
			   r.rsv_start_time,  
			   r.rsv_end_time,  
			   r.rsv_title, c.conf_nm,  
			   r.rsv_mem_nm,  
			   r.rsv_confirm_state,
			   r.rsv_mem_pn,
			   case weekday(r.rsv_date)
			   when '0' then '(월)'
			   when '1' then '(화)'
			   when '2' then '(수)'
			   when '3' then '(목)'
			   when '4' then '(금)'
			   when '5' then '(토)'
			   when '6' then '(일)'
			   end as dayoftheweek

			   from RESERVATION r, CONFERENCE c 
			   		
		<if test="value !=null">
			where r.rsv_conf_no = c.conf_no
			and REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, ' ', ''),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
		order by r.rsv_date ASC) A, (select @RNUM := 0) B) C
		where C.ROWNUM BETWEEN #{startPage} AND #{endPage}

	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 페이징을 위한 '핸드폰 번호' 옵션 검색 결과 개수 -->
	<select id="rownumSelectByMemPN" resultType="Integer" parameterType="HashMap">
		select count(*)
		from RESERVATION r
	
		<if test="value !=null">
			where REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no = 0
		</if>
	
	</select>
	
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복 예약 검색 (rsv_confirm_state(승인상태) == Y, rsv_confirm_state(반복예약기간) != N)-->
	<!-- 반복예약 '전체'옵션, 최신순으로 검색 -->
	<select id="repeatSelectByAllOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT ('%',REPLACE(#{value}, '-', ''),'%'))
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE DESC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>	
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '전체'옵션, 오래된 순으로 검색 -->
	<select id="repeatSelectByAllOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT ('%',REPLACE(#{value}, '-', ''),'%'))
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE ASC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '회의 제목'옵션, 최신순으로 검색 -->
	<select id="repeatSelectByTitleOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE DESC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '회의 제목'옵션, 오래된 순으로 검색 -->
	<select id="repeatSelectByTitleOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE ASC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '예약자'옵션, 최신순으로 검색 -->
	<select id="repeatSelectByMemNMOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE DESC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '예약자'옵션, 오래된 순으로 검색 -->
	<select id="repeatSelectByMemNMOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE ASC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}

	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '예약자 핸드폰 번호'옵션, 최신순으로 검색 -->
	<select id="repeatSelectByMemPNOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT ('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE DESC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
			
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 '예약자 핸드폰 번호'옵션, 오래된 순으로 검색 -->
	<select id="repeatSelectByMemPNOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM + 1 AS ROWNUM, A.* 
		FROM ( 
		
		SELECT MIN(R.RSV_DATE) AS X, MAX(R.RSV_DATE) AS Y,
		R.RSV_START_TIME,
		R.RSV_END_TIME,
		C.CONF_NM,
		R.RSV_TITLE,
		R.RSV_MEM_NM,
		R.RSV_MEM_PN,
		R.RSV_REPEAT_PERIOD,
		R.RSV_SETTING,
		R.RSV_REPEAT_NO,
		R.RSV_CONFIRM_STATE,
		CASE WEEKDAY(MIN(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS SDAYOFTHEWEEK,
		CASE WEEKDAY(MAX(R.RSV_DATE)) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS EDAYOFTHEWEEK
		
		
		FROM RESERVATION R, CONFERENCE C	   		
		<if test="value !=null">
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT ('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			AND R.RSV_REPEAT_NO != 0
		</if>
		
		GROUP BY R.RSV_REPEAT_NO
		ORDER BY R.RSV_DATE ASC, R.RSV_START_TIME ASC, R.RSV_MEM_NM ASC
		) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}

	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 페이징 처리를 위한 반복예약 검색 결과 개수 -->
	<!-- '전체' 옵션으로 검색한 경우 -->
	<select id="rownumRepeatSelectByAll" resultType="Integer" parameterType="HashMap">
		select count(*) 
    	from ( 
    	select count(*)
		from RESERVATION r
		
		<if test="value !=null">
			where (UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				or r.rsv_mem_nm = #{value}
				or REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no != 0
        </if>
        group by r.rsv_repeat_no) CNT
        
       </select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '회의제목' 옵션으로 검색한 경우 -->
	<select id="rownumRepeatSelectByTitle" resultType="Integer" parameterType="HashMap">
		select count(*) 
    	from ( 
    	select count(*)
		from RESERVATION r
		
		<if test="value !=null">
			where UPPER(REPLACE(r.rsv_title, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no != 0
		</if>
        group by r.rsv_repeat_no) CNT
     </select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 이름' 옵션으로 검색한 경우 -->
	<select id="rownumRepeatSelectByMemNM" resultType="Integer" parameterType="HashMap">
		select count(*) 
    	from ( 
    	select count(*)
		from RESERVATION r
		
		<if test="value !=null">
			where r.rsv_mem_nm = #{value}
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no != 0
		</if>
        group by r.rsv_repeat_no) CNT
      </select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '핸드폰 번호' 옵션으로 검색한 경우 -->
	<select id="rownumRepeatSelectByMemPN" resultType="Integer" parameterType="HashMap">
		select count(*) 
    	from ( 
    	select count(*)
		from RESERVATION r
		
		<if test="value !=null">
			where REPLACE(r.rsv_mem_pn, '-', '') LIKE CONCAT('%', REPLACE(#{value}, '-', ''),'%')
			and r.rsv_date between #{sDate} and #{eDate}
			and r.rsv_repeat_no != 0
		</if>
        group by r.rsv_repeat_no) CNT
       </select>
       
	<!-- 작성자 : 최문정 -->
	<!-- 모달 반복예약 상세보기 출력 -->
	<select id="repeatSearchDetailContents" resultType="HashMap" parameterType="HashMap">
		select r.rsv_no,
		r.rsv_date,
		r.rsv_start_time,
		r.rsv_end_time,
		r.rsv_title,
		r.rsv_mem_nm,
		r.rsv_mem_pn,
		r.rsv_confirm_state,
		r.rsv_repeat_period,
		r.rsv_setting,
		r.rsv_repeat_no,
		c.conf_nm,
	   case weekday(r.rsv_date)
		   when '0' then '(월)'
		   when '1' then '(화)'
		   when '2' then '(수)'
		   when '3' then '(목)'
		   when '4' then '(금)'
		   when '5' then '(토)'
		   when '6' then '(일)'
		 end as dayoftheweek
		from RESERVATION r, CONFERENCE c 
		
		<if test="value !=null">
		<![CDATA[
			where r.rsv_conf_no = c.conf_no
			and r.rsv_repeat_no = CAST(#{value} as unsigned)
			and r.rsv_date >= #{sDate}
			and r.rsv_date <= #{eDate}
		]]>
		</if>

	</select>
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 자동완성 기능을 위한 쿼리 -->	
	<!-- 전체검색일 경우 -->
	<select id="autocompleteByAllList" resultType="HashMap" parameterType="String"> <!-- TITLE, MEM_NM, MEM_PN 모두 출력할 수 있도록 -->
		SELECT DISTINCT RSV_TITLE
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE UPPER(REPLACE(RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
		</if>
		
		UNION
		SELECT DISTINCT RSV_MEM_NM
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE RSV_MEM_NM LIKE CONCAT('%',#{value},'%')
		</if>
		
		UNION
		SELECT DISTINCT RSV_MEM_PN
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE REPLACE(RSV_MEM_PN, '-', '') LIKE CONCAT('%',#{value},'%')
		</if>
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 회의제목 검색일 경우 -->
	<select id="autocompleteByTitleList" resultType="HashMap" parameterType="String">
		SELECT DISTINCT RSV_TITLE
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE UPPER(REPLACE(RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
		</if>
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 예약자 검색일 경우 경우 -->
	<select id="autocompleteByMemNMList" resultType="HashMap" parameterType="String">
		SELECT DISTINCT RSV_MEM_NM
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE RSV_MEM_NM LIKE CONCAT('%',#{value},'%')
		</if>
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 예약자 번호 검색인 경우 -->
	<select id="autocompleteByMemPNList" resultType="HashMap">
		SELECT DISTINCT RSV_MEM_PN
		FROM RESERVATION
		
		<if test="value !=null">
		WHERE REPLACE(RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
		</if>
	</select>	
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 관리자 페이지 예약 내역 히스토리 출력 -->
	<!-- 일반예약, 날짜 검색, 최신순  -->
	<select id="generalSelectByDateOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE != 'NOSHOW'
			AND H.HST_REPEAT_PERIOD = 'N'
			ORDER BY H.HST_DATE DESC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반예약, 날짜 검색, 오래된 순  -->
	<select id="generalSelectByDateOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE != 'NOSHOW'
			AND H.HST_REPEAT_PERIOD = 'N'
			ORDER BY H.HST_DATE ASC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반예약, 날짜 검색, 이름 가다나순  -->
	<select id="generalSelectByDateOrderByNameList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE != 'NOSHOW'
			AND H.HST_REPEAT_PERIOD = 'N'
			ORDER BY H.HST_RSV_MEM_NM ASC, H.HST_DATE ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반예약 페이징을 위한 날짜 검색 개수 -->
	<select id="rownumSelectByDate" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*)
		FROM HISTORY H
		

		WHERE H.HST_DATE BETWEEN #{startDate} AND #{endDate}
		AND H.HST_RSV_STATE != 'NOSHOW'
		AND H.HST_REPEAT_PERIOD = 'N'
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약, 날짜 검색, 최신순  -->
	<select id="repeatSelectByDateOrderByNewList" resultType="HashMap" parameterType="HashMap">
			SELECT * FROM (
			SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
			FROM (
	        SELECT MIN(H.HST_DATE) X, MAX(H.HST_DATE) Y, 
				H.HST_START_TIME,
				H.HST_END_TIME,
				C.CONF_NM,
				H.HST_RSV_TITLE,
				H.HST_RSV_MEM_NM,
				H.HST_RSV_MEM_PN,
				H.HST_REPEAT_PERIOD,
				H.HST_SETTING,
				H.HST_RSV_STATE,
				H.HST_REG_DATE,
	            H.HST_REPEAT_NO
	            
	        FROM HISTORY H, CONFERENCE C
	        WHERE H.HST_CONF_NO = C.CONF_NO
				AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
				AND H.HST_RSV_STATE != 'NOSHOW'
				AND H.HST_REPEAT_PERIOD != 'N'
	            GROUP BY HST_REPEAT_NO
				ORDER BY H.HST_DATE DESC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
			WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>	
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약, 날짜 검색, 오래된 순  -->
	<select id="repeatSelectByDateOrderByOldList" resultType="HashMap" parameterType="HashMap">
			SELECT * FROM (
			SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
			FROM (
	        SELECT MIN(H.HST_DATE) X, MAX(H.HST_DATE) Y, 
				H.HST_START_TIME,
				H.HST_END_TIME,
				C.CONF_NM,
				H.HST_RSV_TITLE,
				H.HST_RSV_MEM_NM,
				H.HST_RSV_MEM_PN,
				H.HST_REPEAT_PERIOD,
				H.HST_SETTING,
				H.HST_RSV_STATE,
				H.HST_REG_DATE,
	            H.HST_REPEAT_NO
	            
	        FROM HISTORY H, CONFERENCE C
	        WHERE H.HST_CONF_NO = C.CONF_NO
				AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
				AND H.HST_RSV_STATE != 'NOSHOW'
				AND H.HST_REPEAT_PERIOD != 'N'
	            GROUP BY HST_REPEAT_NO
				ORDER BY H.HST_DATE ASC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
			WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약, 날짜 검색, 이름 가다나순  -->
	<select id="repeatSelectByDateOrderByNameList" resultType="HashMap" parameterType="HashMap">
			SELECT * FROM (
			SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
			FROM (
	        SELECT MIN(H.HST_DATE) X, MAX(H.HST_DATE) Y, 
				H.HST_START_TIME,
				H.HST_END_TIME,
				C.CONF_NM,
				H.HST_RSV_TITLE,
				H.HST_RSV_MEM_NM,
				H.HST_RSV_MEM_PN,
				H.HST_REPEAT_PERIOD,
				H.HST_SETTING,
				H.HST_RSV_STATE,
				H.HST_REG_DATE,
	            H.HST_REPEAT_NO
	            
	        FROM HISTORY H, CONFERENCE C
	        WHERE H.HST_CONF_NO = C.CONF_NO
				AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
				AND H.HST_RSV_STATE != 'NOSHOW'
				AND H.HST_REPEAT_PERIOD != 'N'
	            GROUP BY HST_REPEAT_NO
				ORDER BY H.HST_RSV_MEM_NM ASC, H.HST_DATE ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
			WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>	
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 페이징을 위한 날짜 검색 개수 -->
	<select id="rownumRepeatSelectByDate" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (
		SELECT COUNT(*)
		FROM HISTORY H

		WHERE H.HST_DATE BETWEEN #{startDate} AND #{endDate}
		AND H.HST_RSV_STATE != 'NOSHOW'
		AND H.HST_REPEAT_PERIOD != 'N'
		GROUP BY HST_REPEAT_NO ) CNT
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 반복예약 상세 목록 -->
	<select id="repeatSearchDetailContentsInHistory" resultType="HashMap" parameterType="Integer">
		SELECT H.HST_DATE,
				H.HST_START_TIME,
				H.HST_END_TIME,
				C.CONF_NM,
				H.HST_RSV_TITLE,
				H.HST_RSV_MEM_NM,
				H.HST_RSV_MEM_PN,
				H.HST_REPEAT_PERIOD,
				H.HST_SETTING,
				H.HST_RSV_STATE,
				H.HST_REG_DATE,
	            H.HST_REPEAT_NO
	    FROM HISTORY H, CONFERENCE C
	    WHERE H.HST_CONF_NO = C.CONF_NO
	    AND H.HST_REPEAT_NO =  #{repeatSeq}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 노쇼, 날짜 검색, 최신순  -->
	<select id="noshowSelectByDateOrderByNewList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE = 'NOSHOW'
			ORDER BY H.HST_DATE DESC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 노쇼, 날짜 검색, 오래된 순  -->
	<select id="noshowSelectByDateOrderByOldList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE = 'NOSHOW'
			ORDER BY H.HST_DATE ASC, H.HST_START_TIME ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 노쇼, 날짜 검색, 이름 가다나순  -->
	<select id="noshowSelectByDateOrderByNameList" resultType="HashMap" parameterType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT H.HST_DATE,
			H.HST_START_TIME,
			H.HST_END_TIME,
			C.CONF_NM,
			H.HST_RSV_TITLE,
			H.HST_RSV_MEM_NM,
			H.HST_RSV_MEM_PN,
			H.HST_REPEAT_PERIOD,
			H.HST_SETTING,
			H.HST_RSV_STATE,
			H.HST_REG_DATE	   
			FROM HISTORY H, CONFERENCE C
			
			WHERE H.HST_CONF_NO = C.CONF_NO
			AND H.HST_DATE BETWEEN #{startDate} AND #{endDate}
			AND H.HST_RSV_STATE = 'NOSHOW'
			ORDER BY H.HST_RSV_MEM_NM ASC, H.HST_DATE ASC, H.HST_NO DESC ) A, (SELECT @RNUM := 0) B) C

		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- 노쇼 페이징을 위한 날짜 검색 개수 -->
	<select id="rownumNoshowSelectByDate" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*)
		FROM HISTORY H
		
		WHERE H.HST_DATE BETWEEN #{startDate} AND #{endDate}
		AND H.HST_RSV_STATE = 'NOSHOW'
	</select>
	
	
	
	<!-- 10월 31일 이후 수정 -->
	<!-- 일반 사용자 검색 결과 출력 쿼리 -->
	
	<!-- 작성자 : 최문정 -->
	<!-- '전체'옵션으로 검색한 결과, 최신순 -->
	<select id="generalUserSelectByAllOrderByNew"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
			SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
			FROM (
				SELECT * FROM
				(SELECT MIN(R.RSV_DATE) RSV_DATE,
				R.RSV_NO,
				R.RSV_START_TIME,
				R.RSV_END_TIME,
				R.RSV_TITLE,
				R.RSV_MEM_NM,
				R.RSV_MEM_PN,
				R.RSV_CONFIRM_STATE,
				C.CONF_NM,
				R.RSV_REPEAT_PERIOD,
				R.RSV_SETTING,
				R.RSV_REPEAT_NO,
				R.RSV_DESCRIPTION,
				CASE WEEKDAY(R.RSV_DATE) 
					WHEN '0' THEN '(월)'
					WHEN '1' THEN '(화)'
					WHEN '2' THEN '(수)'
					WHEN '3' THEN '(목)'
					WHEN '4' THEN '(금)'
					WHEN '5' THEN '(토)'
					WHEN '6' THEN '(일)'
					END AS DAYOFTHEWEEK
				FROM RESERVATION R, CONFERENCE C 
				
				<if test="value !=null" >
					WHERE R.RSV_CONF_NO = C.CONF_NO
					AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
					OR R.RSV_MEM_NM = #{value}
					OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
					AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
				</if>
				GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
				
				UNION ALL
				
				SELECT R.RSV_DATE,
				R.RSV_NO,
				R.RSV_START_TIME,
				R.RSV_END_TIME,
				R.RSV_TITLE,
				R.RSV_MEM_NM,
				R.RSV_MEM_PN,
				R.RSV_CONFIRM_STATE,
				C.CONF_NM,
				R.RSV_REPEAT_PERIOD,
				R.RSV_SETTING,
				R.RSV_REPEAT_NO,
				R.RSV_DESCRIPTION,
				CASE WEEKDAY(R.RSV_DATE) 
					WHEN '0' THEN '(월)'
					WHEN '1' THEN '(화)'
					WHEN '2' THEN '(수)'
					WHEN '3' THEN '(목)'
					WHEN '4' THEN '(금)'
					WHEN '5' THEN '(토)'
					WHEN '6' THEN '(일)'
					END AS DAYOFTHEWEEK
				FROM RESERVATION R, CONFERENCE C 
				
				<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				OR R.RSV_MEM_NM = #{value}
				OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
				</if>) RESULT
				ORDER BY RESULT.RSV_DATE DESC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '전체'옵션으로 검색한 결과, 오래된 순 -->
	<select id="generalUserSelectByAllOrderByOld"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				OR R.RSV_MEM_NM = #{value}
				OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				OR R.RSV_MEM_NM = #{value}
				OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '회의제목' 옵션으로 검색한 결과, 최신순-->
	<select id="generalUserSelectByTitleOrderByNew"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE DESC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '회의제목' 옵션으로 검색한 결과, 오래된 순-->
	<select id="generalUserSelectByTitleOrderByOld"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 이름' 옵션으로 검색한 결과, 최신순-->
	<select id="generalUserSelectByMemNMOrderByNew"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_MEM_NM = #{value}
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND R.RSV_MEM_NM = #{value}
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE DESC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 이름' 옵션으로 검색한 결과, 오래된 순-->
	<select id="generalUserSelectByMemNMOrderByOld"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_MEM_NM = #{value}
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND R.RSV_MEM_NM = #{value}
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 번호' 옵션으로 검색한 결과, 최신순-->
	<select id="generalUserSelectByMemPNOrderByNew"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE DESC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}	
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 번호' 옵션으로 검색한 결과, 오래된 순-->
	<select id="generalUserSelectByMemPNOrderByOld"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
				AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
		WHERE C.ROWNUM BETWEEN #{startPage} AND #{endPage}
	</select>
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반 사용자 검색 '전체 옵션', 페이징을 위한 검색 개수 -->
	<select id="rownumGeneralUserSelectByAll" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R
		
		<if test="value !=null" >
			WHERE (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		</if>
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R
		
		<if test="value !=null" >
			WHERE R.RSV_REPEAT_NO = 0
			AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>) RESULT
	</select>
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반 사용자 검색 '회의제목 옵션', 페이징을 위한 검색 개수 -->
	<select id="rownumGeneralUserSelectByTitle" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>) RESULT
	</select>
	
	
	<!-- 작성자 : 최문정 -->
	<!-- 일반 사용자 검색 '예약자 이름 옵션', 페이징을 위한 검색 개수 -->
	<select id="rownumGeneralUserSelectByMemNM" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>) RESULT
	</select>
	
	<!--  작성자 : 최문정 -->
	<!-- 일반 사용자 검색 '예악자 번호 옵션', 페이징을 위한 검색 개수 -->
	<select id="rownumGeneralUserSelectByMemPN" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE BETWEEN #{sDate} AND #{eDate}
		</if>) RESULT
	</select>
	
	
	
	<!-- 일반 사용자 검색 내역 중 반복예약 내역 출력 -->
	<!-- 위의 것 갔다 쓰기 -->
	
	
	
	<!-- 간편검색 내역 -->
	
	<!-- 작성자 : 최문정 -->
	<!-- '전체' 옵션으로 검색한 결과-->
	<select id="easySearchSelectByAll"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				OR R.RSV_MEM_NM = #{value}
				OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
				AND R.RSV_DATE >= #{today}]]>
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				OR R.RSV_MEM_NM = #{value}
				OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
				AND R.RSV_DATE >= #{today}]]>
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '회의제목' 옵션으로 검색한 결과-->
	<select id="easySearchSelectByTitle"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE >= #{today} ]]>
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_REPEAT_NO = 0
				AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
				AND R.RSV_DATE >= #{today} ]]>
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예약자 이름' 옵션으로 검색한 결과-->
	<select id="easySearchSelectByMemNM"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND R.RSV_MEM_NM = #{value}
				AND R.RSV_DATE >= #{today}]]>
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE >= #{today} ]]>
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
	</select>
	
	<!-- 작성자 : 최문정 -->
	<!-- '예악자 번호' 옵션으로 검색한 결과-->
	<select id="easySearchSelectByMemPN"  parameterType="HashMap" resultType="HashMap">
		SELECT * FROM (
		SELECT @RNUM := @RNUM +1 AS ROWNUM, A.*
		FROM (
			SELECT * FROM
			(SELECT MIN(R.RSV_DATE) RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
				<![CDATA[
				WHERE R.RSV_CONF_NO = C.CONF_NO
				AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
				AND R.RSV_DATE >= #{today} ]]>
			</if>
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			
			UNION ALL
			
			SELECT R.RSV_DATE,
			R.RSV_NO,
			R.RSV_START_TIME,
			R.RSV_END_TIME,
			R.RSV_TITLE,
			R.RSV_MEM_NM,
			R.RSV_MEM_PN,
			R.RSV_CONFIRM_STATE,
			C.CONF_NM,
			R.RSV_REPEAT_PERIOD,
			R.RSV_SETTING,
			R.RSV_REPEAT_NO,
			R.RSV_DESCRIPTION,
			CASE WEEKDAY(R.RSV_DATE) 
				WHEN '0' THEN '(월)'
				WHEN '1' THEN '(화)'
				WHEN '2' THEN '(수)'
				WHEN '3' THEN '(목)'
				WHEN '4' THEN '(금)'
				WHEN '5' THEN '(토)'
				WHEN '6' THEN '(일)'
				END AS DAYOFTHEWEEK
			FROM RESERVATION R, CONFERENCE C 
			
			<if test="value !=null" >
			<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE >= #{today}]]>
			</if>) RESULT
			ORDER BY RESULT.RSV_DATE ASC
			) A, (SELECT @RNUM := 0) B) C
	</select>
	
	
	
	<!-- 간편검색 페이징을 위한 검색 개수, '전체'옵션 -->
	<select id="rownumEasySearchSelectByAll" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R
		
		<if test="value !=null" >
		<![CDATA[
			WHERE (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
			AND R.RSV_DATE >= #{today}]]>
		</if>
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_REPEAT_NO = 0
			AND (UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			OR R.RSV_MEM_NM = #{value}
			OR REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%'))
			AND R.RSV_DATE >= #{today}]]>
		</if>) RESULT
	</select>
	
	<!-- 간편검색 페이징을 위한 검색 개수, '회의제목'옵션 -->
	<select id="rownumEasySearchSelectByTitle" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE >= #{today}]]>
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND UPPER(REPLACE(R.RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
			AND R.RSV_DATE >= #{today}]]>
		</if>) RESULT
	</select>
	
	<!-- 간편검색 페이징을 위한 검색 개수, '예약자 이름'옵션 -->
	<select id="rownumEasySearchSelectByMemNM" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE >= #{today}]]>
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND R.RSV_MEM_NM = #{value}
			AND R.RSV_DATE >= #{today}]]>
		</if>) RESULT
	</select>
	
	<!-- 간편검색 페이징을 위한 검색 개수, '예약자 번호'옵션 -->
	<select id="rownumEasySearchSelectByMemPN" resultType="Integer" parameterType="HashMap">
		SELECT COUNT(*) FROM (SELECT * 
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE >= #{today}]]>
		</if>
		GROUP BY R.RSV_REPEAT_NO HAVING R.RSV_REPEAT_NO != 0
		
		UNION ALL
		
		SELECT  *
		FROM RESERVATION R, CONFERENCE C 
		
		<if test="value !=null" >
		<![CDATA[
			WHERE R.RSV_CONF_NO = C.CONF_NO
			AND R.RSV_REPEAT_NO = 0
			AND REPLACE(R.RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
			AND R.RSV_DATE >= #{today}]]>
		</if>) RESULT
	</select>

	
	<!-- 간편 검색 내역 중 반복예약 상세내역 출력 -->
	<select id="repeatSearchDetailContentsForEasySearch"  parameterType="HashMap" resultType="HashMap">
		SELECT R.RSV_NO,
				R.RSV_DATE,
				R.RSV_START_TIME,
				R.RSV_END_TIME,
				R.RSV_TITLE,
				R.RSV_MEM_NM,
				R.RSV_MEM_PN,
				R.RSV_CONFIRM_STATE,
				R.RSV_REPEAT_PERIOD,
				R.RSV_SETTING,
				R.RSV_REPEAT_NO,
				C.CONF_NM,
				CASE WEEKDAY(R.RSV_DATE) 
					WHEN '0' THEN '(월)'
					WHEN '1' THEN '(화)'
					WHEN '2' THEN '(수)'
					WHEN '3' THEN '(목)'
					WHEN '4' THEN '(금)'
					WHEN '5' THEN '(토)'
					WHEN '6' THEN '(일)'
					END AS DAYOFTHEWEEK
				
		FROM  RESERVATION R, CONFERENCE C
		
		
		
		<if test="value !=null">
		<![CDATA[
		WHERE R.RSV_CONF_NO = C.CONF_NO
		AND R.RSV_REPEAT_NO = #{repeatSeq}
		AND R.RSV_DATE >= #{value}]]>
		</if>
	</select>
	
	<!--  간편검색을 위한 자동완성 기능, '전체' 옵션 -->
	<select id="easyAutocompleteByAllList" resultType="HashMap" parameterType="HashMap">
		SELECT DISTINCT RSV_TITLE
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE UPPER(REPLACE(RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
		AND RSV_DATE >= #{today}]]>
		</if>
		
		UNION
		SELECT DISTINCT RSV_MEM_NM
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE RSV_MEM_NM LIKE CONCAT('%',#{value},'%')
		AND RSV_DATE >= #{today}]]>
		</if>
		
		UNION
		SELECT DISTINCT RSV_MEM_PN
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE REPLACE(RSV_MEM_PN, '-', '') LIKE CONCAT('%',#{value},'%')
		AND RSV_DATE >= #{today}]]>
		</if>
	</select>
	
	<!--  간편검색을 위한 자동완성 기능, '회의제목 옵션' -->
	<select id="easyAcompleteByTitleList" resultType="HashMap" parameterType="HashMap">
		SELECT DISTINCT RSV_TITLE
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE UPPER(REPLACE(RSV_TITLE, ' ', '')) like CONCAT('%',UPPER(REPLACE(#{value}, ' ', '')),'%')
		AND RSV_DATE >= #{today}]]>
		</if>
	</select>
	
	<!--  간편검색을 위한 자동완성 기능, '예약자' 옵션 -->
	<select id="easyAutocompleteByMemNMList" resultType="HashMap" parameterType="HashMap">
		SELECT DISTINCT RSV_MEM_NM
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE RSV_MEM_NM LIKE CONCAT('%',#{value},'%')
		AND RSV_DATE >= #{today}]]>
		</if>
	</select>
	
	<!--  간편검색을 위한 자동완성 기능, '예약자 번호 '옵션 -->
	<select id="easyAutocompleteByMemPNList" resultType="HashMap" parameterType="HashMap">
		SELECT DISTINCT RSV_MEM_PN
		FROM RESERVATION
		
		<if test="value !=null">
		<![CDATA[
		WHERE REPLACE(RSV_MEM_PN, '-', '') LIKE CONCAT('%',REPLACE(#{value}, '-', ''),'%')
		AND RSV_DATE >= #{today}]]>
		</if>
	</select>
	

</mapper>